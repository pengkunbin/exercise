<!DOCTYPE html>
<html>

<head>
    <title>èˆ¹èˆ¶è®¡ç®—</title>
</head>

<body>
    <h1>èˆ¹èˆ¶è®¡ç®—</h1>
    <h2>èˆ¹ä½“è¦ç´ </h2>
    <form>
        <p>
            <label for="L">èˆ¹é•¿(L)ï¼š</label>
            <input type="number" id="L" step="0.01" value="134.1" required>
        </p>
        <p>
            <label for="H">èˆ¹å®½(H)ï¼š</label>
            <input type="number" id="H" step="0.01" value="15.4" required>
        </p>
        <p>
            <label for="D">åƒæ°´(D)ï¼š</label>
            <input type="number" id="D" step="0.01" value="4.21" required>
        </p>
        <p>
            <label for="CB">æ–¹å½¢ç³»æ•°(CB)ï¼š</label>
            <input type="number" id="CB" step="0.01" value="0.4256" required>
        </p>
        <h2>èˆµè¦ç´ </h2>
        <p>
            <label for="AR">èˆµé¢ç§¯(AR)ï¼š</label>
            <input type="number" id="AR" step="0.01" value="7.29" required>
        </p>
        <p>
            <label for="HR">èˆµé«˜(HR)ï¼š</label>
            <input type="number" id="HR" step="0.01" value="3.27" required>
        </p>
        <p>
            <label for="ZXB">å±•å¼¦æ¯”(ZXB)ï¼š</label>
            <input type="number" id="ZXB" step="0.01" value="1.47" required>
        </p>
        <h2>æ¡¨è¦ç´ </h2>
        <p>
            <label for="DP">èºæ—‹æ¡¨ç›´å¾„(DP)ï¼š</label>
            <input type="number" id="DP" step="0.01" value="3.8" required>
        </p>
        <p>
            <label for="YP">åŒæ¡¨é—´è·(YP)ï¼š</label>
            <input type="number" id="YP" step="0.01" value="4.98" required>
        </p>
        <h2>å…¶ä»–å‚æ•°</h2>
        <p>
            <label for="CI">æ¨ªæµé˜»å°¼ç³»æ•°(CI)ï¼š</label>
            <input type="number" id="CI" step="0.01" value="1.19907" required>
        </p>
        <p>
            <label for="CT">æ¡¨å€’è½¦ç³»æŸ±æ‹‰åŠ›ç³»æ•°(CT)ï¼š</label>
            <input type="number" id="CT" step="0.01" value="0.025" required>
        </p>
        <p>
            <label for="SCTZ">ä¾§æ¨å™¨åˆ°é‡å¿ƒçš„è·ç¦»(SCTZ)ï¼š</label>
            <input type="number" id="SCTZ" step="0.01" value="60" required>
        </p>
        <p>
            <label for="SJZ">èˆµåˆ°é‡å¿ƒçš„è·ç¦»(SJZ)ï¼š</label>
            <input type="number" id="SJZ" step="0.01" value="63" required>
        </p>
        <p>
            <label for="ROU">æµ·æ°´å¯†åº¦(ROU)ï¼š</label>
            <input type="number" id="ROU" step="0.01" value="1" required>
        </p>
        <h1>å¯æ“çºµæ•°æ®</h1>
        <p>
            <label for="V">æ¨ªç§»é€Ÿåº¦ï¼ˆVï¼‰ï¼š</label>
            <input type="number" id="V" name="V" step="0.01" value="0.6" required><br>
        </p>
        <p>
            <label for="YCT">ä¾§æ¨åŠ›ï¼ˆYCTï¼‰ï¼š</label>
            <input type="number" id="YCT" name="YCT" step="0.01" value="10" required><br>
        </p>
        <p>
            <label for="DJD">èˆµè§’åº¦ï¼ˆDJDï¼‰ï¼š</label>
            <input type="number" id="DJD" name="DJD" step="0.01" value="35" required><br>
        </p>
        <input type="button" value="è®¡ç®—" onclick="calculate()">
        <h2>è¾“å‡º</h1>
            <h3>è¿›è½¦èºæ—‹æ¡¨æ¡¨è§’:</h3>
            <div id="RJJJ"></div>
            <h3>å€’è½¦èºæ—‹æ¡¨æ¡¨è§’:</h3>
            <div id="RDJJ"></div>
    </form>
    <script>
        function degToRad(degrees) {
            return degrees * (Math.PI / 180);
        }

        function calculate() {
            // è·å–è¡¨å•ä¸­çš„å€¼
            const CI = parseFloat(document.getElementById('CI').value);
            const CB = parseFloat(document.getElementById('CB').value);
            const H = parseFloat(document.getElementById('H').value);
            const D = parseFloat(document.getElementById('D').value);
            const ROU = parseFloat(document.getElementById('ROU').value);
            const L = parseFloat(document.getElementById('L').value);
            const V = parseFloat(document.getElementById('V').value);
            const AR = parseFloat(document.getElementById('AR').value);
            const DJD = parseFloat(document.getElementById('DJD').value);
            const DP = parseFloat(document.getElementById('DP').value);
            const HR = parseFloat(document.getElementById('HR').value);
            const YP = parseFloat(document.getElementById('YP').value);
            const ZXB = parseFloat(document.getElementById('ZXB').value);
            const CT = parseFloat(document.getElementById('CT').value);
            // è¿›è¡Œè®¡ç®—
            const CUR = 0.7 * DP / HR;
            // è®¡ç®—æ¨ªæµé˜»å°¼ç³»æ•°
            const C = CI - 0.3466478 * CB - 0.3363621 * CB * CB - 0.04538 * H / D;

            // è®¡ç®—æ¨ªæµé˜»å°¼åŠ›
            const YZ = C * 0.5 * ROU * L * D * V * V;

            // ç”¨äºéªŒè¯æ¨åŠ›ç³»æ•°
            const TLXS = 0.24828 - 0.07083 * Math.sqrt(L / D + CB) + 4.49423 * CB * (D / L) * (D / L);

            // ä¾§æ¨å™¨åˆ°é‡å¿ƒçš„è·ç¦»
            const SCTZ = 60;

            // èˆµåˆ°é‡å¿ƒçš„è·ç¦»
            const SJZ = 63;
            console.log("ğŸš€ ~ file: ship-calculation.html:129 ~ calculate ~ SJZ:", SJZ)

            const pi = Math.PI;
            // åˆå§‹åŒ– FN çš„è¿‘ä¼¼è§£
            function solveEquation() {
                let FN, YCT;
                for (FN = 0; FN <= 100; FN += 0.01) { // ä½¿ç”¨æ•°å€¼æ–¹æ³•æ±‚è§£æ–¹ç¨‹
                    for (YCT = 0; YCT <= 100; YCT += 0.01) {
                        const left = (FN * (2.25 + ZXB) / (6.13 * ZXB) ** 2 / AR / Math.sin(DJD) * pi * DP * DP / 8 / CUR / CUR - FN * Math.sin(DJD)) * YP - YCT * SCTZ + FN * Math.sin(DJD) * YP / 2 + FN * Math.cos(DJD) * SJZ;
                        const right = YCT + FN * Math.cos(DJD) - YZ;
                        if (Math.abs(left - right) < 0.001) { // åˆ¤æ–­æ˜¯å¦æ»¡è¶³ç²¾åº¦è¦æ±‚
                            return [FN, YCT];
                        }
                    }
                }
                return []; // å¦‚æœæ²¡æœ‰æ‰¾åˆ°è§£ï¼Œåˆ™è¿”å› null
            }

            const [FN, YCT] = solveEquation();
            console.log(`FN = ${FN}, YCT = ${YCT}`);
            console.log("ğŸš€ ~ file: ship-calculation.html:156 ~ calculate ~ FN:", FN, YCT)


            const TPA = FN * (2.25 + ZXB) / (6.13 * ZXB) * 2 / AR / Math.sin(DJD * (Math.PI / 180)) * Math.PI * DP * DP / 8 / CUR / CUR;
            const XR = FN * Math.sin(DJD * (Math.PI / 180));
            const YR = FN * Math.cos(DJD * (Math.PI / 180));
            const TPB = TPA - XR;
            const N = Math.sqrt(TPA * 8 / (0.49 * Math.PI * CT * ROU * Math.pow(Math.PI, 3) * Math.pow(DP, 4)));
            const JJJ = 36.2 * (N * 60 / 235.7);
            const n = Math.sqrt(TPB * 8 / (0.49 * Math.PI * CT * ROU * Math.pow(Math.PI, 3) * Math.pow(DP, 4)));
            console.log("ğŸš€ ", N, TPB, CT, ROU, DP)
            const DJJ = 52.2 * (n * 60 / 235.7);
            const YZG = -(YCT + YR - YZ);

            console.log("FN = " + FN.toFixed(2));
            console.log("TPA = " + TPA.toFixed(2));
            console.log("XR = " + XR.toFixed(2));
            console.log("YR = " + YR.toFixed(2));
            console.log("TPB = " + TPB.toFixed(2));
            console.log("N = " + N.toFixed(2));
            console.log("JJJ = " + JJJ.toFixed(2));
            console.log("n = " + n);
            console.log("DJJ = " + DJJ);
            console.log("YZG = " + YZG.toFixed(2));

            // è·å–ä¸¤ä¸ª div å…ƒç´ 
            var div1 = document.getElementById('RJJJ');
            var div2 = document.getElementById('RDJJ');

            // ç»™ä¸¤ä¸ª div å…ƒç´ èµ‹å€¼
            div1.innerHTML = JJJ;
            div2.innerHTML = DJJ;
        }
    </script>
</body>